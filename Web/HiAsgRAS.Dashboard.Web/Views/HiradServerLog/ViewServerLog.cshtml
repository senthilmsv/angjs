@model HiAsgRAS.ViewModel.HiradServerModel

<div class="card">
    <div class="card-header" data-background-color="green">
        <button type="button" class="close pull-right" data-dismiss="modal">&times;</button>
        <i class="fa fa-server" aria-hidden="true"></i> <h4 class="title" style="display: inline;">HI RAD Server - Log Status</h4>
        <div class="category">
            <div class="row">
                <div class="col-xs-5 title">
                    <span class="titleText">System Name: </span><span class="titleValue">@Model.SystemName</span>
                    <a class="btnPop" data-toggle="popover" data-container="body" data-placement="right"
                       type="button" data-html="true" href="#" id="scomments" title="@Model.SystemName - Comments">
                        <span class="fa fa-info-circle" style="margin:3px 0 0 0"></span>
                    </a>
                    <div id="popover-content-scomments" class="hide">
                        @Html.TextArea("txtsComment", @Model.Comments,
                        new { rows = 10, cols = 80, @class = "form-control TextArea popover-content" })
                    </div>

                    <!--List-->
                    <a class="btnPop" data-toggle="popover" data-container="body" data-placement="right"
                       type="button" data-html="true" href="#" id="appslist" title="@Model.SystemName - Apps/Web/Dbs List">
                        <span class="glyphicon glyphicon-list" style="margin:3px 0 0 0"></span>
                    </a>
                    <div id="popover-content-appslist" class="hide">
                        <div style="max-height: 400px; overflow-y: auto;">
                            <table class="table table-striped table-bordered table-hover table-condensed table-striped"
                                   id="hiAppsList" style="width:100%;">
                                <thead class="text-rose">
                                    <tr>
                                        <th>App/Web Name</th>
                                        <th>Remedy Group</th>
                                        <th>DB Name</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @{
                                        if (Model.AppsList != null && Model.AppsList.Any())
                                        {
                                            foreach (var item in Model.AppsList)
                                            {
                                                <tr>
                                                    <td>@item.AppName</td>
                                                    <td>@item.RemedyGroupName</td>
                                                    <td>@item.DbName</td>
                                                </tr>
                                            }
                                        }
                                        else
                                        {
                                            <tr>
                                                <td colspan="3">No records found</td>
                                            </tr>
                                        }
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <!--End of List-->
                </div>
                <div class="col-xs-3 title"><span class="titleText">IP Address: </span><span class="titleValue">@Model.IPAddress</span></div>
               @* <div class="col-xs-2 title"><span class="titleText">Domain: </span><span class="titleValue">@Model.Domain</span></div>*@
                <div class="col-xs-2 title"><span class="titleText">Status: </span><span class="titleValue">@Model.StatusType</span></div>
            </div>

            <div class="row">
                <div class="col-xs-5 title"><span class="titleText">Platform: </span><span class="titleValue">@Model.Platform</span></div>
                <div class="col-xs-2 title"><span class="titleText">Build: </span><span class="titleValue">@Model.BuildVersion</span></div>
                <div class="col-xs-5 title"><span class="titleText">Model: </span><span class="titleValue">@Model.Model</span></div>
            </div>

            <div class="row">
                <div class="col-xs-5 title"><span class="titleText">Processor: </span><span class="titleValue">@Model.Processor</span></div>
                <div class="col-xs-2 title"><span class="titleText"># of Cores: </span><span class="titleValue">@Model.TotalCores</span></div>
                <div class="col-xs-3 title"><span class="titleText">BootTime: </span><span class="titleValue">@Model.LastBootTime</span></div>
                <div class="col-xs-2 title"><span class="titleText">Location: </span><span class="titleValue">@Model.Location</span></div>
            </div>

            <div class="row">
                <div class="col-xs-2 title"><span class="titleText">Serial #: </span><span class="titleValue">@Model.SerialNumber</span></div>
                <div class="col-xs-3 title"><span class="titleText">Assest Tag: </span><span class="titleValue">@Model.AssetTag</span></div>
                <div class="col-xs-2 title"><span class="titleText">ABC ID: </span><span class="titleValue">@Model.ABCId</span></div>
                <div class="col-xs-2 title"><span class="titleText">Cost Center: </span><span class="titleValue">@Model.CostCenter</span></div>
                <div class="col-xs-3 title"><span class="titleText">Remedy Group: </span><span class="titleValue">@Model.SupportStaff</span></div>
            </div>
            <div class="row">
                <div class="col-xs-12 title">
                    <span class="titleText">System Info/Use: </span>
                    <span class="titleValue">@Model.ApplicationUse</span>
                </div>
            </div>
        </div>
    </div>
    <div class="card-content">
        <table class="table table-striped table-bordered table-hover table-condensed table-striped" id="hiRadServerLog" style="width:100%;">
            <thead class="text-rose">
                <tr>
                    <th>Id</th>
                    <th>Monitored At</th>
                    <th>Status</th>
                    <th>Error Description</th>
                    <th>Avbl.HDD</th>
                    <th>Avbl.RAM</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.HiradServerLogs)
                {
                    <tr>
                        <td>@item.Id</td>
                        <td>@item.MonitoredAt.Value.ToString("MM/dd/yyyy hh:mm tt")</td>
                        <td>@item.Status</td>
                        <td>@item.ErrorDescription</td>
                        <td>@item.AvblHDDSpace</td>
                        <td>@item.AvblRAM</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

@section head{
    <style type="text/css">
    </style>
}

<script>
    //Dom Ready
    $(function () {
        //$('[data-toggle="tooltip"]').tooltip();

        //$('[data-toggle="popover"]').popover();

        $("[data-toggle=popover]").each(function (i, obj) {

            $(this).popover({
                //trigger: 'hover',
                container: 'body',
                content: function () {
                    var id = $(this).attr('id')
                    return $('#popover-content-' + id).html();
                },
                html: true,
            })
            .click(function (e) {
                e.preventDefault();
            });

        });

        //hide Other popover messages
        $('.btnPop').on('click', function (e) {
            $('.btnPop').not(this).popover('hide');
        });

        //hide all popover messages when modal closes
        $('#dvModal').on('hidden.bs.modal', function (e) {
            $('.btnPop').popover('hide');
        });

        //Load data table
        $('#hiRadServerLog').dataTable().fnDestroy();
        var table = $("#hiRadServerLog").DataTable({
            "order": [[0, "desc"]],
            "scrollY": '50vh',
            "scrollCollapse": true,
            "pageLength": -1,
            "lengthMenu": [[-1, 10, 20, 50, 100], ["All", 10, 20, 50, 100]],
            "bAutoWidth": false,
            "aoColumns": [
                { "sWidth": "10px", "bSearchable": false, "visible": false },
                { "sWidth": "181px" },
                { "sWidth": "104px" },
                { "sWidth": "226px" },
                { "sWidth": "343px" },
                { "sWidth": "143px" }
            ],
            "fnInitComplete": function () {
                $("#hiRadServerLog").css("width", "100%");
                $(".dataTables_scrollHead").css("width", "100%");
                $(".dataTables_scrollHeadInner").css("width", "100%");
                $(".dataTables_scrollHeadInner table").css("width", "100%");
            }
        });
    });
</script>


